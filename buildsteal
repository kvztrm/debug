-- White ESP + MUTATION SCANNER - Prefixes mutation to brainrot name
-- Only highlights if mutation = gold/thunder/water/inferno/admin OR empty

local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

-- Valid mutations
local validMutations = {
    "gold", "thunder", "water", "inferno", "admin"
}

-- Brainrot targets
local targets = {
    "La Grande Combinasion",
    "KarKirKirKurKur", 
    "Octamasu Noddledudu",
    "Rhino Toasterino",
    "Bulbito Bandito Traktorito",
    "Alessio",
    "Chillin Chili",
    "Strawberry Elephant",
    "Torrtuginni Dragonfruitinni"
}

local highlighted = {}
local allHighlights = {}

local function matchesTarget(name)
    local lower = name:lower()
    for _, t in ipairs(targets) do
        if lower:find(t:lower()) then return true end
    end
    return false
end

local function getDisplayName(model, mutation)
    if mutation and mutation ~= "" then
        return mutation .. " " .. model.Name
    else
        return model.Name  -- Keep original name if no mutation
    end
end

local function highlightModel(model, displayName, mutation)
    if highlighted[model] then return end
    highlighted[model] = true

    local hl = Instance.new("Highlight")
    hl.Name = "BrainrotESP"
    hl.FillColor = Color3.new(1,1,1)
    hl.OutlineColor = Color3.new(1,1,1)
    hl.FillTransparency = 0.4
    hl.OutlineTransparency = 0
    hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    hl.Parent = model
    table.insert(allHighlights, hl)

    local root = model.PrimaryPart or model:FindFirstChildWhichIsA("BasePart", true)
    if root then
        local bb = Instance.new("BillboardGui")
        bb.Adornee = root
        bb.Size = UDim2.new(0, 280, 0, 60)  -- Wider for mutation prefix
        bb.StudsOffset = Vector3.new(0,4,0)
        bb.AlwaysOnTop = true
        bb.Parent = root
        
        local txt = Instance.new("TextLabel")
        txt.Size = UDim2.new(1,0,1,0)
        txt.BackgroundTransparency = 1
        txt.Text = displayName
        txt.TextColor3 = Color3.new(1,1,1)
        txt.TextStrokeTransparency = 0
        txt.TextStrokeColor3 = Color3.new(0,0,0)
        txt.TextScaled = true
        txt.Font = Enum.Font.GothamBold
        txt.Parent = bb
        table.insert(allHighlights, bb)
    end

    -- Pulse effect
    task.spawn(function()
        while hl.Parent do
            hl.FillTransparency = 0.4
            task.wait(0.8)
            hl.FillTransparency = 0.75
            task.wait(0.8)
        end
    end)

    print("âœ…", displayName, "â†’", model:GetFullName())
end

local function scan()
    local plots = Workspace:FindFirstChild("Plots")
    if not plots then return end

    local count = 0
    for i = 1, 6 do
        local plot = plots:FindFirstChild(tostring(i))
        if not plot then continue end

        -- Check ALL models for brainrots
        for _, obj in ipairs(plot:GetDescendants()) do
            if obj:IsA("Model") and matchesTarget(obj.Name) then
                -- Look for mutation in this plot's Builds
                local mutation = ""
                local builds = plot:FindFirstChild("Builds")
                if builds then
                    local build = builds:FindFirstChild(tostring(i))
                    if build then
                        local root = build:FindFirstChild("ROOT")
                        if root then
                            local petNameTag = root:FindFirstChild("PetNameTag")
                            if petNameTag then
                                local typeLabel = petNameTag:FindFirstChild("Type")
                                if typeLabel and typeLabel:IsA("TextLabel") then
                                    local petText = typeLabel.Text:lower()
                                    -- Check if valid mutation
                                    for _, valid in ipairs(validMutations) do
                                        if petText == valid then
                                            mutation = petText:gsub("^%l", string.upper)  -- Capitalize
                                            break
                                        end
                                    end
                                end
                            end
                        end
                    end
                end

                -- Highlight if valid mutation OR empty
                if mutation ~= "" or true then  -- Always highlight (empty = true)
                    local displayName = getDisplayName(obj, mutation)
                    highlightModel(obj, displayName, mutation)
                    count = count + 1
                end
            end
        end
    end

    print("Scan complete. Highlighted", count, "brainrot(s)")
end

print("ðŸš€ Brainrot ESP + Mutation Scanner ACTIVE")
scan()

-- Rescan every 4s
local conn = RunService.Heartbeat:Connect(function()
    if tick() % 4 < 0.05 then scan() end
end)

game.Players.LocalPlayer.CharacterRemoving:Connect(function()
    conn:Disconnect()
    for _, h in ipairs(allHighlights) do pcall(h.Destroy, h) end
end)
