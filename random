--[[
    Simple Aimbot - All Features On
    - Press Q to toggle on/off
    - Infinite range
    - Wall checks OFF (can shoot through walls)
    - Instant lock onto closest player
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- All features enabled
local aimbotEnabled = false
local currentTarget = nil
local detectionRange = 5000 -- Infinite range

-- Find closest player
function findClosestPlayer()
    local closestPlayer = nil
    local closestDistance = detectionRange
    
    local myChar = LocalPlayer.Character
    if not myChar or not myChar:FindFirstChild("HumanoidRootPart") then return nil end
    
    local myRoot = myChar.HumanoidRootPart
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
            local head = player.Character:FindFirstChild("Head")
            
            if rootPart and head then
                local distance = (rootPart.Position - myRoot.Position).Magnitude
                
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end
    
    return closestPlayer
end

-- Instant aim
function aimAtTarget()
    if not currentTarget then return end
    
    local head = currentTarget.Character:FindFirstChild("Head")
    local rootPart = currentTarget.Character:FindFirstChild("HumanoidRootPart")
    local aimPart = head or rootPart
    
    if not aimPart then return end
    
    -- Instant lock
    Camera.CFrame = CFrame.new(Camera.CFrame.Position, aimPart.Position)
    Mouse.Hit = CFrame.new(aimPart.Position)
end

-- High frequency updates
RunService.RenderStepped:Connect(function()
    if aimbotEnabled and currentTarget then
        aimAtTarget()
    end
end)

RunService.Heartbeat:Connect(function()
    if aimbotEnabled and currentTarget then
        aimAtTarget()
    end
end)

-- Toggle with Q
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == Enum.KeyCode.Q then
            aimbotEnabled = not aimbotEnabled
            
            if aimbotEnabled then
                currentTarget = findClosestPlayer()
                if currentTarget then
                    -- Multiple instant locks
                    for i = 1, 10 do
                        aimAtTarget()
                        task.wait(0.0001)
                    end
                    
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "Aimbot ON",
                        Text = "Locked: " .. currentTarget.Name,
                        Duration = 2
                    })
                else
                    aimbotEnabled = false
                    game.StarterGui:SetCore("SendNotification", {
                        Title = "No Target",
                        Text = "No players found",
                        Duration = 2
                    })
                end
            else
                currentTarget = nil
                game.StarterGui:SetCore("SendNotification", {
                    Title = "Aimbot OFF",
                    Text = "Press Q to enable",
                    Duration = 2
                })
            end
        end
    end
end)

-- Initial notification
game.StarterGui:SetCore("SendNotification", {
    Title = "Aimbot Loaded",
    Text = "Press Q to toggle",
    Duration = 5
})
