-- Loop Bring: Brings you 5 studs under player "blank"'s torso
-- Toggle with Q key
-- Fires RemoteEvent when ForceField expires

local GetService = setmetatable({}, {
	__index = function(Self, Name)
		Self[Name] = game:GetService(Name)
		return Self[Name]
	end
})

local Players = GetService.Players
local ReplicatedStorage = GetService.ReplicatedStorage
local RunService = GetService.RunService
local LocalPlayer = Players.LocalPlayer
local UserInputService = GetService.UserInputService

local RemoteEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("RemoteEvent")

local TargetPlayerName = "blank"
local OffsetY = -5 -- 5 studs under

local Enabled = false

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LoopBringBlankGUI"
ScreenGui.Parent = game:GetService("CoreGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 50)
Frame.Position = UDim2.new(0.5, -125, 0.85, -25)
Frame.BackgroundColor3 = Color3.new(0, 0, 0)
Frame.BackgroundTransparency = 0.5
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local TextLabel = Instance.new("TextLabel")
TextLabel.Size = UDim2.new(1, 0, 1, 0)
TextLabel.BackgroundTransparency = 1
TextLabel.Text = "LoopBring: OFF (Press Q)"
TextLabel.TextColor3 = Color3.new(1, 0, 0)
TextLabel.TextSize = 18
TextLabel.Font = Enum.Font.SourceSansBold
TextLabel.Parent = Frame

local function UpdateGUI()
    if Enabled then
        TextLabel.Text = "LoopBring: ON (Press Q)"
        TextLabel.TextColor3 = Color3.new(0, 1, 0)
    else
        TextLabel.Text = "LoopBring: OFF (Press Q)"
        TextLabel.TextColor3 = Color3.new(1, 0, 0)
    end
end

-- Function to fire remote event when ForceField expires
local function OnForceFieldRemoved()
    pcall(function()
        RemoteEvent:FireServer()
    end)
    warn("ForceField expired - RemoteEvent fired")
end

-- Monitor local player's ForceField
local function MonitorForceField()
    local MyChar = LocalPlayer.Character
    if not MyChar then return end
    
    local ForceField = MyChar:FindFirstChildOfClass("ForceField")
    if ForceField then
        ForceField.Destroyed:Connect(OnForceFieldRemoved)
    end
end

-- Monitor for character changes
LocalPlayer.CharacterAdded:Connect(function()
    task.wait(0.5)
    MonitorForceField()
end)

-- Initial check
task.wait(1)
MonitorForceField()

RunService.Heartbeat:Connect(function()
    if not Enabled then return end
    
    local MyChar = LocalPlayer.Character
    if not MyChar then return end
    
    local Root = MyChar:FindFirstChild("HumanoidRootPart")
    if not Root then return end
    
    -- Unanchor root if anchored
    if Root.Anchored then Root.Anchored = false end
    
    -- Find target player
    local TheTarget = Players:FindFirstChild(TargetPlayerName)
    if not TheTarget then
-- Keep GUI visible
task.spawn(function()
    while task.wait(1) do
        if ScreenGui.Parent == nil then
            ScreenGui.Parent = game:GetService("CoreGui")
        end
    end
end)

warn("LoopBring loaded - Press Q to toggle")
