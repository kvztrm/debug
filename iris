local Iris = loadstring(game:HttpGet("https://raw.githubusercontent.com/x0581/Iris-Exploit-Bundle/2.0.4/bundle.lua"))().Init(game.CoreGui)

local enabled = Iris.State(true)

-- We'll store the original Heartbeat connection so we can kill it
local originalConnection = nil

-- This is a very hacky way – we override RunService.Heartbeat:Connect temporarily
local oldConnect = RunService.Heartbeat.Connect
RunService.Heartbeat.Connect = function(self, fn)
    local conn = oldConnect(self, fn)
    -- Assume the autokill script uses Heartbeat – store the first one we see after load
    if not originalConnection then
        originalConnection = conn
    end
    return conn
end

-- Load the script (it will use our hooked Connect)
loadstring(game:HttpGet("https://raw.githubusercontent.com/kvztrm/debug/refs/heads/main/lip"))()

-- Restore original method
RunService.Heartbeat.Connect = oldConnect

-- Now use the toggle to kill/resume the connection
enabled.changed = {} -- fake event since old Iris doesn't have it
local oldSet = enabled.set
enabled.set = function(self, v)
    oldSet(self, v)
    for _, cb in ipairs(enabled.changed) do cb(v) end
end

table.insert(enabled.changed, function(isOn)
    if originalConnection then
        if isOn then
            -- Can't really resume a disconnected RBXScriptConnection – have to reload
            warn("Cannot resume – reload script to re-enable")
        else
            pcall(function() originalConnection:Disconnect() end)
            warn("Autokill loop killed")
        end
    end
end)

Iris:Connect(function()
    Iris.Window({"LIFE IN PRISON"})
    
    Iris.Tree({"MAIN"})
        Iris.Checkbox({"AUTOKILL TOGGLE"}, {isChecked = enabled})
        Iris.Text({"AUTOKILL: " .. (enabled:get() and "ENABLED" or "DISABLED")})
    Iris.End()
    
    Iris.End()
end)
